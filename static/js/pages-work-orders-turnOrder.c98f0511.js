(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-work-orders-turnOrder"],{"1a01":function(e,t,i){"use strict";var n=i("4f0c"),a=i.n(n);a.a},2955:function(e,t,i){"use strict";i.r(t);var n=i("d2e6"),a=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(o);t["default"]=a.a},"38c9":function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return o})),i.d(t,"a",(function(){return n}));var n={uniSection:i("10b3").default,uniCard:i("1694").default,uniForms:i("01bb").default,uniFormsItem:i("ea92").default,superweiCombox:i("be99").default},a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"questionaire"},[i("uni-section",{attrs:{title:"報修信息",type:"line"}},[i("uni-card",{staticClass:"order-info"},[i("v-uni-view",{staticClass:"info-li"},[i("v-uni-view",{staticClass:"tab"},[e._v("報修單號：")]),i("v-uni-text",[e._v(e._s(e.fixHead.orderNo))])],1),i("v-uni-view",{staticClass:"info-li"},[i("v-uni-view",{staticClass:"tab"},[e._v("報修人：")]),i("v-uni-text",[e._v(e._s(e.fixHead.empNo)+"-"+e._s(e.fixHead.empName))])],1),i("v-uni-view",{staticClass:"info-li"},[i("v-uni-view",{staticClass:"tab"},[e._v("報修時間：")]),i("v-uni-text",[e._v(e._s(e.fixHead.createDate))])],1),i("v-uni-view",{staticClass:"info-li"},[i("v-uni-view",{staticClass:"tab"},[e._v("所在單位：")]),i("v-uni-text",[e._v(e._s(e.fixHead.departmentName))])],1),i("v-uni-view",{staticClass:"info-li"},[i("v-uni-view",{staticClass:"tab"},[e._v("聯繫方式：")]),i("v-uni-text",[e._v(e._s(e.fixHead.telNo))])],1),i("v-uni-view",{staticClass:"info-li"},[i("v-uni-view",{staticClass:"tab"},[e._v("報修內容：")]),i("v-uni-text",[e._v(e._s("【"+e.fixHead.repTypeLevel1+"-"+e.fixHead.repTypeLevel2+"】"+e.fixHead.repRemark+"（數量"+e.fixHead.repNum+"）"))])],1)],1)],1),i("uni-section",{attrs:{title:"轉單信息",type:"line"}},[i("v-uni-view",{staticClass:"content"},[i("uni-forms",{ref:"valiForm",attrs:{rules:e.rules,modelValue:e.formData,"label-width":"180rpx","label-align":"right"}},[i("uni-forms-item",{attrs:{label:"工程師選擇",name:"equNo"}},[i("superwei-combox",{attrs:{candidates:e.engineerOptions,isJSON:!0,keyName:"name",valueName:"empNo",placeholder:"请选择工程師"},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.inputEngineer.apply(void 0,arguments)},select:function(t){arguments[0]=t=e.$handleEvent(t),e.selectEngineer.apply(void 0,arguments)}},model:{value:e.formData.newEmpNo,callback:function(t){e.$set(e.formData,"newEmpNo",t)},expression:"formData.newEmpNo"}})],1)],1)],1)],1),i("v-uni-view",{staticClass:"page-footer"},[i("v-uni-button",{attrs:{type:"primary"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.submit("valiForm")}}},[e._v("提交")])],1)],1)},o=[]},"4e2c":function(e,t,i){var n=i("24fb");t=n(!1),t.push([e.i,'@charset "UTF-8";\n/**\n * uni-app内置的常用样式变量\n */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */uni-page-body[data-v-4d9fe305]{background:#fff}body.?%PAGE?%[data-v-4d9fe305]{background:#fff}.title[data-v-4d9fe305]{text-align:center;line-height:1.8;font-weight:700;font-size:%?34?%}.order-info .info-li[data-v-4d9fe305]{line-height:1.8;display:-webkit-box;display:-webkit-flex;display:flex;font-size:%?24?%}.order-info .info-li .tab[data-v-4d9fe305]{width:%?150?%;text-align:justify;text-align-last:justify;text-justify:distribute-all-lines}.order-info .info-li uni-text[data-v-4d9fe305]{width:%?100?%;-webkit-box-flex:1;-webkit-flex:1;flex:1;word-wrap:break-word}.question-box .question-text[data-v-4d9fe305]{text-indent:2em;font-size:%?24?%;line-height:1.8}.content[data-v-4d9fe305]{padding:%?24?%;box-sizing:border-box}.part[data-v-4d9fe305]{width:100%;background:#fff;height:100%;padding:%?30?%;box-sizing:border-box}.part-title[data-v-4d9fe305]{width:100%;text-align:center;padding:%?30?%;box-sizing:border-box;font-size:%?30?%;font-weight:700}.tag-view[data-v-4d9fe305]{padding:0 %?30?%;box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:right;-webkit-justify-content:right;justify-content:right}.order-body[data-v-4d9fe305]{padding-bottom:%?100?%;overflow:hidden}.order-footer[data-v-4d9fe305]{position:fixed;bottom:0;left:0;width:100%;height:%?100?%;box-shadow:0 %?-2?% 36px %?1?% rgba(56,56,56,.1);background:#fff;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-wrap:nowrap;flex-wrap:nowrap;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding:%?20?%;box-sizing:border-box}.order-footer .button[data-v-4d9fe305]{margin-left:%?20?%}.order-li[data-v-4d9fe305]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-flex-wrap:nowrap;flex-wrap:nowrap;border-bottom:1px solid #ebeef5;padding:%?10?% 0 %?60?%;box-sizing:border-box;width:100%}.order-li .order-li-tab[data-v-4d9fe305]{min-width:%?160?%}.order-li .order-li-text[data-v-4d9fe305]{word-wrap:break-word;font-weight:700;font-size:%?26?%;-webkit-box-flex:1;-webkit-flex:1;flex:1;width:100px}.order-li .tel-box[data-v-4d9fe305]{-webkit-align-self:end;align-self:end}.order-table[data-v-4d9fe305]{width:100%;border:1px solid #fff;font-size:%?24?%}.order-table .table-tr[data-v-4d9fe305]{width:100%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-wrap:nowrap;flex-wrap:nowrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;border-bottom:1px solid #fff}.order-table .table-tr .table-th[data-v-4d9fe305]{width:%?80?%;-webkit-box-flex:1;-webkit-flex-grow:1;flex-grow:1;text-align:center;line-height:2;border-right:1px solid #fff;background:rgba(24,144,255,.3);color:#1890ff}.order-table .table-tr .table-td[data-v-4d9fe305]{width:%?80?%;-webkit-box-flex:1;-webkit-flex-grow:1;flex-grow:1;text-align:center;line-height:2;border-right:1px solid #fff;background:#f0f0f0;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;-o-text-overflow:ellipsis}.order-table .table-tr[data-v-4d9fe305]:last-child{border-bottom:none}.order-table .table-tr .table-th[data-v-4d9fe305]:last-child, .order-table .table-tr .table-td[data-v-4d9fe305]:last-child{border-right:none}.submitBtn[data-v-4d9fe305]{padding:%?40?%;box-sizing:border-box}.page-footer[data-v-4d9fe305]{position:fixed;bottom:0;right:0;width:100%;padding:%?40?%;box-sizing:border-box}',""]),e.exports=t},"4f0c":function(e,t,i){var n=i("4e2c");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i("4f06").default;a("dde50aa4",n,!0,{sourceMap:!1,shadowMode:!1})},5058:function(e,t,i){"use strict";i.r(t);var n=i("38c9"),a=i("2955");for(var o in a)["default"].indexOf(o)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(o);i("1a01");var r=i("f0c5"),d=Object(r["a"])(a["default"],n["b"],n["c"],!1,null,"4d9fe305",null,!1,n["a"],void 0);t["default"]=d.exports},d2e6:function(e,t,i){"use strict";i("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("4de4"),i("d3b7"),i("159b"),i("14d9");var n=i("1be7"),a=i("db37"),o=(i("ffe9"),i("eff3"),i("69ef")),r=(i("7c7e"),i("15db"),i("a28a")),d={dicts:["itsm_fix_ok","itsm_fix_speed_level","sys_yes_no"],data:function(){return{consumables:[],partOptions:[],partData:{partNum:1},inputValue_json:"",engineerOptions:[],itsm_fix_order_result:[],rules:{newEmpNo:{rules:[{required:!0,errorMessage:"請選擇工程師！"}]}},formData:{newEmpNo:""},fixHead:{orderNo:"",empName:"",empNo:"",createDate:"",departmentName:"",telNo:"",repRemark:""}}},beforeMount:function(){this.getDictsOption()},onLoad:function(e){e.hasOwnProperty("orderNo")||(uni.showToast({icon:"error",title:"數據錯誤，請確認！",duration:2e3}),setTimeout((function(){uni.reLaunch({url:"/pages/index"})}),2e3)),this.orderNo=e.orderNo,this.getOrder()},methods:{selectEngineer:function(e){console.log(e)},submit:function(e){var t=this;this.$refs[e].validate().then((function(e){t.formData.orderNo=t.orderNo;var i=t.engineerOptions.filter((function(e){return t.formData.newEmpNo==e.empNo}));i.length>0?(uni.showLoading({title:"提交中"}),(0,a.turnWorking)(t.formData).then((function(e){uni.hideLoading(),uni.showToast({title:"提交成功！",duration:2e3}),setTimeout((function(){uni.redirectTo({url:"/pages/work/orderHead"})}),2e3)}))):uni.showToast({title:"請選擇正確的工程師！",icon:"error"})})).catch((function(e){console.log("err",e)}))},getEngineer:function(e){var t=this;""!==e?(0,r.selectAreaEngineers)(this.orderNo,e).then((function(e){e.forEach((function(e){e.id=e.empNo,e.name=e.empNo+"-"+e.empName})),t.engineerOptions=e})):this.engineerOptions=[]},inputEngineer:function(e){var t=e.split("-")[0];this.getEngineer(t)},getOrder:function(){var e=this;uni.showLoading({title:"加载中"}),(0,o.baseInfo)(this.orderNo).then((function(t){uni.hideLoading(),e.fixHead=t.data.orderInfo}))},getDictsOption:function(){var e=this;(0,n.getDicts)("itsm_fix_ok").then((function(t){var i=t.data;e.itsm_fix_ok=[],i.forEach((function(t){var i={text:t.dictLabel,value:t.dictValue};e.itsm_fix_ok.push(i)}))})),(0,n.getDicts)("itsm_fix_speed_level").then((function(t){var i=t.data;e.itsm_fix_speed_level=[],i.forEach((function(t){var i={text:t.dictLabel,value:t.dictValue};e.itsm_fix_speed_level.push(i)}))})),(0,n.getDicts)("sys_yes_no").then((function(t){var i=t.data;e.sys_yes_no=[],i.forEach((function(t){var i={text:t.dictLabel,value:t.dictValue};e.sys_yes_no.push(i)}))})),(0,n.getDicts)("itsm_fix_order_result").then((function(t){var i=t.data;e.itsm_fix_order_result=[],i.forEach((function(t){var i={text:t.dictLabel,value:t.dictValue};e.itsm_fix_order_result.push(i)}))}))}}};t.default=d}}]);