(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-mine-info-edit"],{5091:function(e,t,a){"use strict";a.r(t);var n=a("dcb2"),r=a.n(n);for(var u in n)["default"].indexOf(u)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(u);t["default"]=r.a},"56c2":function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return u})),a.d(t,"a",(function(){return n}));var n={uniForms:a("01bb").default,uniFormsItem:a("ea92").default,uniEasyinput:a("4586").default,uniDataCheckbox:a("9d11").default},r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"container"},[a("v-uni-view",{staticClass:"example"},[a("uni-forms",{ref:"form",attrs:{model:e.user,labelWidth:"80px"}},[a("uni-forms-item",{attrs:{label:"用户昵称",name:"nickName"}},[a("uni-easyinput",{attrs:{placeholder:"请输入昵称"},model:{value:e.user.nickName,callback:function(t){e.$set(e.user,"nickName",t)},expression:"user.nickName"}})],1),a("uni-forms-item",{attrs:{label:"手机号码",name:"phonenumber"}},[a("uni-easyinput",{attrs:{placeholder:"请输入手机号码"},model:{value:e.user.phonenumber,callback:function(t){e.$set(e.user,"phonenumber",t)},expression:"user.phonenumber"}})],1),a("uni-forms-item",{attrs:{label:"邮箱",name:"email"}},[a("uni-easyinput",{attrs:{placeholder:"请输入邮箱"},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}})],1),a("uni-forms-item",{attrs:{label:"性别",name:"sex",required:!0}},[a("uni-data-checkbox",{attrs:{localdata:e.sexs},model:{value:e.user.sex,callback:function(t){e.$set(e.user,"sex",t)},expression:"user.sex"}})],1)],1),a("v-uni-button",{attrs:{type:"primary"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.submit.apply(void 0,arguments)}}},[e._v("提交")])],1)],1)},u=[]},5859:function(e,t,a){"use strict";a.r(t);var n=a("56c2"),r=a("5091");for(var u in r)["default"].indexOf(u)<0&&function(e){a.d(t,e,(function(){return r[e]}))}(u);a("9ac8");var i=a("f0c5"),s=Object(i["a"])(r["default"],n["b"],n["c"],!1,null,"347f6706",null,!1,n["a"],void 0);t["default"]=s.exports},"7dae":function(e,t,a){"use strict";a("7a82");var n=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("fb6a"),a("d3b7"),a("caad"),a("2532");var r=n(a("5c72")),u=n(a("e7ec")),i=a("b972"),s=n(a("5359")),o=a("9154"),l=u.default.baseUrl,f=function(e){var t=!1===(e.headers||{}).isToken;if(e.header=e.header||{},(0,i.getToken)()&&!t&&(e.header["Authorization"]="Bearer "+(0,i.getToken)()),e.params){var a=e.url+"?"+(0,o.tansParams)(e.params);a=a.slice(0,-1),e.url=a}return new Promise((function(t,a){uni.uploadFile({timeout:e.timeout||1e4,url:l+e.url,filePath:e.filePath,name:e.name||"file",header:e.header,formData:e.formData,success:function(e){var n=JSON.parse(e.data),u=n.code||200,i=s.default[u]||n.msg||s.default["default"];200===u?t(n):401==u?((0,o.showConfirm)("登录状态已过期，您可以继续留在该页面，或者重新登录?").then((function(e){e.confirm&&r.default.dispatch("LogOut").then((function(e){uni.reLaunch({url:"/pages/login/login"})}))})),a("无效的会话，或者会话已过期，请重新登录。")):500===u?((0,o.toast)(i),a("500")):200!==u&&((0,o.toast)(i),a(u))},fail:function(e){var t=e.message;"Network Error"==t?t="后端接口连接异常":t.includes("timeout")?t="系统接口请求超时":t.includes("Request failed with status code")&&(t="系统接口"+t.substr(t.length-3)+"异常"),(0,o.toast)(t),a(e)}})}))};t.default=f},8912:function(e,t,a){"use strict";a("7a82");var n=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.getUserInfo=function(e){return(0,u.default)({url:"/system/user/getUserInfo/"+e,method:"get"})},t.getUserProfile=function(){return(0,u.default)({url:"/system/user/profile",method:"get"})},t.updateUserProfile=function(e){return(0,u.default)({url:"/system/user/profile",method:"put",data:e})},t.updateUserPwd=function(e,t){var a={oldPassword:e,newPassword:t};return(0,u.default)({url:"/system/user/profile/updatePwd",method:"put",params:a})},t.uploadAvatar=function(e){return(0,r.default)({url:"/system/user/profile/avatar",name:e.name,filePath:e.filePath})};var r=n(a("7dae")),u=n(a("30af"))},"90c4":function(e,t,a){var n=a("a845");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var r=a("4f06").default;r("6fbc81b2",n,!0,{sourceMap:!1,shadowMode:!1})},"9ac8":function(e,t,a){"use strict";var n=a("90c4"),r=a.n(n);r.a},a845:function(e,t,a){var n=a("24fb");t=n(!1),t.push([e.i,'@charset "UTF-8";\n/**\n * uni-app内置的常用样式变量\n */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */uni-page-body[data-v-347f6706]{background-color:#fff}body.?%PAGE?%[data-v-347f6706]{background-color:#fff}.example[data-v-347f6706]{padding:15px;background-color:#fff}.segmented-control[data-v-347f6706]{margin-bottom:15px}.button-group[data-v-347f6706]{margin-top:15px;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-justify-content:space-around;justify-content:space-around}.form-item[data-v-347f6706]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-flex:1;-webkit-flex:1;flex:1}.button[data-v-347f6706]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;height:35px;line-height:35px;margin-left:10px}',""]),e.exports=t},dcb2:function(e,t,a){"use strict";a("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a("8912"),r={data:function(){return{user:{nickName:"",phonenumber:"",email:"",sex:""},sexs:[{text:"男",value:"0"},{text:"女",value:"1"}],rules:{nickName:{rules:[{required:!0,errorMessage:"用户昵称不能为空"}]},phonenumber:{rules:[{required:!0,errorMessage:"手机号码不能为空"},{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,errorMessage:"请输入正确的手机号码"}]},email:{rules:[{required:!0,errorMessage:"邮箱地址不能为空"},{format:"email",errorMessage:"请输入正确的邮箱地址"}]}}}},onLoad:function(){this.getUser()},onReady:function(){this.$refs.form.setRules(this.rules)},methods:{getUser:function(){var e=this;(0,n.getUserProfile)().then((function(t){e.user=t.data}))},submit:function(e){var t=this;this.$refs.form.validate().then((function(e){(0,n.updateUserProfile)(t.user).then((function(e){t.$modal.msgSuccess("修改成功")}))}))}}};t.default=r}}]);